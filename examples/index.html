<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Scrollmeister</title>
		<script src="../dist/scrollmeister.js"></script>
		<style>
			body {
				font-family: -apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;
			}

			* {
				margin: 0;
				padding: 0;
			}

			h1 {
				padding-bottom: 1em;
			}

			scroll-meister[fadein] {
				opacity: 0;
				transition: opacity 0.3s ease-in-out;
			}

			el-meister {
				background: rgba(0, 255, 0, 0.5);
				outline: 1px solid rgba(255, 0, 0, 0.5);
			}

			el-meister.follower {
				background: rgba(0, 0, 255, 0.5);
			}

			.cover > img {
				width: 100%;
				height: 100%;
				object-fit: cover;
			}

			img {
				display: block;
				max-width: 100%;
			}
		</style>
	</head>
	<body>
		<scroll-meister debug-guides fadein scroll hash-navigation
			guide-layout="
				guides:
					contentleft 0 2vmin,
					leftthird 33.333%,
					center 50% 2vmin,
					centercollapsed 50%,
					contentright 100% 2vmin,
					right 100px -100px;
				width :
					1200px;
			"
		>
			<el-meister layout="guides: contentleft contentright;" fluid-text>
				<h1>Scrollmeister thingy</h1>
			</el-meister>

			<el-meister layout="guides: contentleft contentright;">
				<!--TODO: height: auto does not work without the wrapping div tho-->
				<div>
					<a href="#gl">gl-effect</a>
				</div>
			</el-meister>

			<!-- <el-meister layout="guides: contentleft contentright; height: 560/315" youtube>
				<iframe width="560" height="315" src="https://www.youtube.com/embed/Ev4w3vxZqHU?enablejsapi=1&rel=0&amp;controls=0&amp;showinfo=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
			</el-meister> -->

			<el-meister gallery layout="guides: contentleft contentright; spacing: 20vh;">
				<img src="photo-1426170042593-200f250dfdaf.jpg" width="1920" height="1080" />
				<img src="photo-1432149629818-13b6e10a6e2c.jpg" width="1920" height="1280" />
				<img src="bogdan-dada-156739-unsplash.jpg" width="1920" height="1280" />
				<img src="bogdan-dada-156739-unsplash.jpg" width="1920" height="1280" />
				<img src="photo-1426170042593-200f250dfdaf.jpg" width="1920" height="1080" />
				<img src="photo-1442422502730-a90f72460717.jpg" width="1440" height="1920" />
				<img src="photo-1426170042593-200f250dfdaf.jpg" width="1920" height="1080" />
				<img src="photo-1432149629818-13b6e10a6e2c.jpg" width="1920" height="1280" />
				<img src="bogdan-dada-156739-unsplash.jpg" width="1920" height="1280" />
				<img src="bogdan-dada-156739-unsplash.jpg" width="1920" height="1280" />
				<img src="photo-1442422502730-a90f72460717.jpg" width="1440" height="1920" />
			</el-meister>

			<el-meister layout="height: 50vh; spacing: 20vh 0;" interpolate rotating-gradient="speed: 1; offset: 40;"></el-meister>

			<el-meister media="ratio: 1920 / 1080;" layout="guides: contentleft contentright; height: 1/1; spacing: 50vh 0;">
				<img src="bogdan-dada-156739-unsplash.jpg" />
			</el-meister>

			<el-meister id="gl" media="ratio: 1920 / 1080" interpolate gl-effect layout="guides: contentleft contentright; height: 800/600; spacing: 50vh;">
				<img class="cover" src="bogdan-dada-156739-unsplash.jpg" />
				<!--<video src="./chrome.mp4" type="video/mp4" muted playsInline autoplay loop></video>-->
				<script type="text/plain">
				precision mediump float;

				uniform float progress;
				uniform sampler2D image;
				uniform vec2 size;

				varying vec2 uv;

				void main() {
					vec2 center = size / 2.0;
					float radius = progress * max(size.x, size.y) / 2.0;
					float angle = progress * 3.14159 * 5.0;

					vec2 coord = uv * size;

					coord -= center;

					float distance = length(coord);

					if (distance < radius) {
						float percent = (radius - distance) / radius;
						float theta = percent * percent * angle;
						float s = sin(theta);
						float c = cos(theta);

						coord = vec2(
							coord.x * c - coord.y * s,
							coord.x * s + coord.y * c
						);
					}

					coord += center;

					gl_FragColor = texture2D(image, coord / size);
				}
				</script>
				<script type="text/plain">
				precision mediump float;

				uniform float progress;
				uniform vec2 size;
				uniform sampler2D image;

				varying vec2 uv;

				void main() {
					//This way we see the pixels much earlier. We skip the boring part were they're just like a little bigger than original.
					float easedProgress = pow(progress, 0.1);

					//The grid size in whole squares, e.g. 15x7.
					vec2 grid = floor(size * (1.0 - easedProgress) + 0.5);

					//The size of a single pixelated block, e.g. 0.1x0.07 (10%x7% of the texture size).
					vec2 pixelSize = 1.0 / grid;

					//We use the color at the center of the block for all pixels inside of it.
					vec2 transformedUV = (floor(uv / pixelSize) / grid) + (pixelSize / 2.0);

					gl_FragColor = texture2D(image, transformedUV);
				}
				</script>
			</el-meister>

			<el-meister layout="guides: contentleft contentright; height: 10vh; spacing: 10vh 0;" interpolate="opacity: center 1, top 0.5; rotate: center 0, top: 360" transform></el-meister>

			<el-meister layout="guides: contentleft leftthird; spacing: 20vh 0;">
				<p>8 Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
				<img src="bogdan-dada-156739-unsplash.jpg" />
				<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
				<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
			</el-meister>

			<el-meister layout="guides: leftthird contentright; height: 640/320; mode: follow; followerMode: parallax;" interpolate="alpha: bottom 0, top 0.9" scrub="parameter: alpha;">
				<video src="./chrome.mp4" type="video/mp4" preload="auto" muted playsInline></video>
			</el-meister>

			<el-meister layout="guides: contentleft contentright; height: 10vh; spacing: 10vh 0;">4</el-meister>
			<el-meister layout="guides: contentleft contentright; height: 10vh; spacing: 10vh 0;" interpolate="opacity: bottom 0, bottom 100vh 1; scale: bottom 0, top 1" transform>5</el-meister>
			<el-meister layout="guides: contentleft contentright; height: 10vh; spacing: 10vh 0;">6</el-meister>

			<el-meister layout="guides: contentleft leftthird; height: 50vh; spacing: 20vh 0;" style="z-index: 1;">7</el-meister>

			<el-meister layout="guides: viewport viewport; mode: follow; clip: true; height: 75vh;" lazy-load class="follower">
				<img class="cover" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" data-src="bogdan-dada-156739-unsplash.jpg" />
			</el-meister>

			<el-meister layout="guides: contentleft leftthird; spacing: 20vh 0;">
				8 Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
				<img src="bogdan-dada-156739-unsplash.jpg" />
				Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
			</el-meister>

			<el-meister
				class="follower"
				layout="
					guides: leftthird centercollapsed;
					height: 10px;
					mode: follow;
					followerMode: pin;
				"
			></el-meister>

			<el-meister layout="guides: center contentright; height: 10vh; spacing: 10vh 0; dependencies: inherit;">9</el-meister>
			<el-meister layout="guides: contentleft contentright; height: 10vh; spacing: 10vh 0; dependencies: inherit;">10</el-meister>
			<el-meister layout="guides: contentleft contentright; height: 10vh; spacing: 10vh 0; dependencies: inherit;">11</el-meister>
			<el-meister layout="guides: contentleft contentright; height: 10vh; spacing: 10vh 0; dependencies: inherit;">12</el-meister>
			<el-meister layout="guides: contentleft contentright; height: 10vh; spacing: 10vh 25vh; dependencies: inherit;">13</el-meister>
		</scroll-meister>
	</body>
</html>
